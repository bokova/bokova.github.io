<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZAKK</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 300;
      color: #111111;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
      background-color: #F8F8F8;
    }

    canvas#particleCanvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .logo {
      position: fixed;
      top: 24px;
      left: 32px;
      font-size: 0.9rem;
      font-weight: 900;
      letter-spacing: 0.06em;
      background: transparent;
      padding: 4px 8px;
      z-index: 10;
    }

    .container {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 4rem 2rem 2rem 2rem;
      position: relative;
      z-index: 1;
    }

    ul {
      list-style: none;
      text-align: center;
      width: 100%;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100%;
    }

    li {
      font-size: clamp(1rem, 2.2vh, 2.2rem);
      letter-spacing: -0.02em;
      transition: transform 0.2s ease, opacity 0.2s ease, font-weight 0.2s ease;
      transform-origin: center;
      cursor: default;
    }

    li.contact-item button,
    li.references-item button {
      background: none;
      border: none;
      padding: 0;
      font-family: inherit;
      font-size: inherit;
      letter-spacing: inherit;
      color: #006A4E;
      font-weight: 500;
      text-decoration: underline;
      text-transform: uppercase;
      cursor: pointer;
    }

    li.contact-item button:focus-visible,
    li.references-item button:focus-visible {
      outline: 2px solid #006A4E;
      outline-offset: 4px;
      border-radius: 2px;
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 20;
    }

    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-content {
      background: #ffffff;
      min-width: unset;
      width: min(360px, calc(100vw - 2rem));
      padding: 3rem 2rem 4.5rem 2rem;
      text-align: center;
      position: relative;
    }

    .modal-content h2 {
      font-weight: 500;
      text-transform: uppercase;
      margin-bottom: 1.5rem;
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: #111;
      line-height: 1;
      padding: 4px 8px;
      font-family: inherit;
    }

    .modal-close:focus-visible {
      outline: 2px solid #006A4E;
      outline-offset: 4px;
      border-radius: 2px;
    }

    .modal-links {
      position: absolute;
      bottom: 1.2rem;
      left: 1.5rem;
      right: 1.5rem;
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
    }

    .modal-links a {
      text-decoration: underline;
      color: #006A4E;
    }

    #referencesModal .modal-content {
      width: min(480px, calc(100vw - 2rem));
      padding: 3rem 3.5rem 3rem 3.5rem;
    }

    .ref-slide {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 1.2rem;
      min-height: 140px;
      justify-content: center;
    }

    .ref-slide.active {
      display: flex;
    }

    .ref-quote {
      font-size: 0.95rem;
      line-height: 1.7;
      font-weight: 300;
      color: #222;
    }

    .ref-name {
      font-size: 0.8rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #006A4E;
    }

    .ref-controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 2rem;
    }

    .ref-arrow {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: #111;
      padding: 6px 10px;
      font-family: inherit;
      line-height: 1;
      transition: opacity 0.2s ease;
    }

    .ref-arrow:disabled {
      opacity: 0.2;
      cursor: default;
    }

    .ref-arrow:focus-visible {
      outline: 2px solid #006A4E;
      outline-offset: 4px;
      border-radius: 2px;
    }

    .ref-counter {
      font-size: 0.75rem;
      letter-spacing: 0.06em;
      color: #999;
    }

    @media (max-width: 768px) {
      li {
        font-size: clamp(0.9rem, 2vh, 1.6rem);
      }
    }
  </style>
</head>
<body>

  <canvas id="particleCanvas"></canvas>

  <div class="logo">ZAKK</div>

  <div class="container">
    <ul id="serviceList">
      <li>UX / UI Design</li>
      <li>Web Design</li>
      <li>Web Development</li>
      <li>eCommerce Solutions</li>
      <li>Mobile App Development</li>
      <li>SEO Optimization</li>
      <li>Analytics & Insights</li>
      <li>Automation Systems</li>
      <li>Digital Transformation</li>
      <li>Ongoing Support</li>
      <li class="references-item" style="display:none">
        <button id="referencesTrigger" aria-haspopup="dialog">References</button>
      </li>
      <li class="contact-item">
        <button id="contactTrigger" aria-haspopup="dialog">Contact</button>
      </li>
    </ul>
  </div>

  <!-- Contact modal -->
  <div class="modal" id="contactModal" role="dialog" aria-modal="true" aria-labelledby="contactModalTitle">
    <div class="modal-content">
      <button class="modal-close" id="closeContactModal" aria-label="Close contact modal">✕</button>
      <h2 id="contactModalTitle">Contact</h2>
      <p>Plavecká 405/2<br>128 00 Prague<br>Czechia<br><br>info@zakk.cz</p>
      <div class="modal-links">
        <a href="https://www.linkedin.com/company/zakk-sro/" target="_blank" rel="noopener noreferrer">linkedin</a>
        <a href="https://or.justice.cz/ias/ui/rejstrik-firma.vysledky?subjektId=860380&typ=PLATNY" target="_blank" rel="noopener noreferrer">company</a>
      </div>
    </div>
  </div>

  <!-- References modal -->
  <div class="modal" id="referencesModal" role="dialog" aria-modal="true" aria-labelledby="referencesModalTitle">
    <div class="modal-content">
      <button class="modal-close" id="closeReferencesModal" aria-label="Close references modal">✕</button>
      <h2 id="referencesModalTitle">References</h2>
      <div id="refSlides" aria-live="polite">
        <div class="ref-slide active">
          <p class="ref-quote">Working with ZAKK transformed how our customers experience our brand online. The attention to detail and speed of delivery were unlike anything we had seen before.</p>
          <span class="ref-name">Martin Novák, CEO at Aloha Group</span>
        </div>
        <div class="ref-slide">
          <p class="ref-quote">They took a vague brief and turned it into something we are genuinely proud of. The whole team was responsive, honest, and highly skilled throughout the entire process.</p>
          <span class="ref-name">Jana Horáková, Founder at Velvet Studio</span>
        </div>
        <div class="ref-slide">
          <p class="ref-quote">Our eCommerce revenue grew significantly after the redesign. ZAKK understood both the design and the business side, which made all the difference.</p>
          <span class="ref-name">Tomáš Blaha, COO at Nordvik</span>
        </div>
        <div class="ref-slide">
          <p class="ref-quote">Fast, clean, and professional. They delivered a complex web app on time and without cutting corners. We will absolutely work with them again.</p>
          <span class="ref-name">Petra Šimková, Product Lead at Stackfield</span>
        </div>
      </div>
      <div class="ref-controls">
        <button class="ref-arrow" id="refPrev" aria-label="Previous reference">←</button>
        <span class="ref-counter" id="refCounter">1 / 4</span>
        <button class="ref-arrow" id="refNext" aria-label="Next reference">→</button>
      </div>
    </div>
  </div>

  <script>
    // -------------------------------------------------------
    // PARTICLE FIELD
    // -------------------------------------------------------
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');

    const PARTICLE_COUNT = 120;
    const REPEL_RADIUS = 120;
    const REPEL_STRENGTH = 3.5;
    const DRIFT_SPEED = 0.3;
    const RETURN_EASE = 0.04;
    const DOT_RADIUS = 1.5;

    let mouse = { x: null, y: null };
    let particles = [];

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      // Respawn so density stays correct after resize
      init();
    }

    function randomParticle() {
      const angle = Math.random() * Math.PI * 2;
      const speed = DRIFT_SPEED * (0.3 + Math.random() * 0.7);
      return {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        originX: null, // set after placement
        originY: null,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        radius: DOT_RADIUS * (0.6 + Math.random() * 0.8),
        alpha: 0.15 + Math.random() * 0.35,
      };
    }

    function init() {
      particles = Array.from({ length: PARTICLE_COUNT }, () => {
        const p = randomParticle();
        p.originX = p.x;
        p.originY = p.y;
        return p;
      });
    }

    function tick() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (const p of particles) {
        // Gentle ambient drift
        p.x += p.vx;
        p.y += p.vy;

        // Wrap at edges
        if (p.x < -10) p.x = canvas.width + 10;
        if (p.x > canvas.width + 10) p.x = -10;
        if (p.y < -10) p.y = canvas.height + 10;
        if (p.y > canvas.height + 10) p.y = -10;

        // Keep origin in sync with drift so particles don't
        // snap back to a fixed home after being repelled
        p.originX += p.vx;
        p.originY += p.vy;

        // Repulsion
        if (mouse.x !== null) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const dist = Math.sqrt(dx * dx + dy * dy);

          if (dist < REPEL_RADIUS && dist > 0) {
            const force = (1 - dist / REPEL_RADIUS) * REPEL_STRENGTH;
            const nx = dx / dist;
            const ny = dy / dist;
            // Push particle away from cursor
            p.x += nx * force;
            p.y += ny * force;
          } else {
            // Ease back toward drifting origin when outside radius
            p.x += (p.originX - p.x) * RETURN_EASE;
            p.y += (p.originY - p.y) * RETURN_EASE;
          }
        }

        // Draw dot
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(17, 17, 17, ${p.alpha})`;
        ctx.fill();
      }

      // Draw connecting lines between close neighbours
      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
          const a = particles[i];
          const b = particles[j];
          const dx = a.x - b.x;
          const dy = a.y - b.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const LINE_THRESHOLD = 90;

          if (dist < LINE_THRESHOLD) {
            const lineAlpha = (1 - dist / LINE_THRESHOLD) * 0.08;
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.strokeStyle = `rgba(17, 17, 17, ${lineAlpha})`;
            ctx.lineWidth = 0.5;
            ctx.stroke();
          }
        }
      }

      requestAnimationFrame(tick);
    }

    window.addEventListener('resize', resize);

    document.addEventListener('mousemove', (e) => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    document.addEventListener('mouseleave', () => {
      mouse.x = null;
      mouse.y = null;
    });

    document.addEventListener('touchmove', (e) => {
      mouse.x = e.touches[0].clientX;
      mouse.y = e.touches[0].clientY;
    }, { passive: true });

    document.addEventListener('touchend', () => {
      mouse.x = null;
      mouse.y = null;
    });

    resize();
    tick();

    // -------------------------------------------------------
    // LIST SCALING
    // -------------------------------------------------------
    const items = document.querySelectorAll('#serviceList li');
    const maxScale = 2.8;
    const influenceRadius = 60;
    let activeY = null;
    let rafPending = false;

    function applyScaling() {
      items.forEach(item => {
        if (activeY === null) {
          item.style.transform = 'scale(1)';
          item.style.opacity = 1;
          item.style.fontWeight = 300;
          return;
        }
        const rect = item.getBoundingClientRect();
        const itemCenterY = rect.top + rect.height / 2;
        const distance = Math.abs(activeY - itemCenterY);
        if (distance < influenceRadius) {
          const scale = 1 + (1 - distance / influenceRadius) * (maxScale - 1);
          item.style.transform = `scale(${scale})`;
          item.style.opacity = 1;
          item.style.fontWeight = 500;
        } else {
          item.style.transform = 'scale(1)';
          item.style.opacity = 0.6;
          item.style.fontWeight = 300;
        }
      });
      rafPending = false;
    }

    function scheduleUpdate(y) {
      activeY = y;
      if (!rafPending) {
        rafPending = true;
        requestAnimationFrame(applyScaling);
      }
    }

    document.addEventListener('mousemove', (e) => scheduleUpdate(e.clientY));
    document.addEventListener('mouseleave', () => scheduleUpdate(null));
    document.addEventListener('touchmove', (e) => {
      scheduleUpdate(e.touches[0].clientY);
    }, { passive: true });
    document.addEventListener('touchend', () => scheduleUpdate(null));

    // -------------------------------------------------------
    // MODAL HELPER
    // -------------------------------------------------------
    function buildModalController({ modalEl, triggerEl, closeBtnEl }) {
      function open() {
        modalEl.classList.add('active');
        closeBtnEl.focus();
      }
      function close() {
        modalEl.classList.remove('active');
        triggerEl.focus();
      }
      triggerEl.addEventListener('click', open);
      closeBtnEl.addEventListener('click', close);
      modalEl.addEventListener('click', (e) => { if (e.target === modalEl) close(); });
      modalEl.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') { close(); return; }
        if (e.key !== 'Tab') return;
        const focusable = [...modalEl.querySelectorAll('button, a[href], input, [tabindex]:not([tabindex="-1"])')];
        const first = focusable[0];
        const last = focusable[focusable.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === first) { e.preventDefault(); last.focus(); }
        } else {
          if (document.activeElement === last) { e.preventDefault(); first.focus(); }
        }
      });
      return { open, close };
    }

    buildModalController({
      modalEl: document.getElementById('contactModal'),
      triggerEl: document.getElementById('contactTrigger'),
      closeBtnEl: document.getElementById('closeContactModal'),
    });

    buildModalController({
      modalEl: document.getElementById('referencesModal'),
      triggerEl: document.getElementById('referencesTrigger'),
      closeBtnEl: document.getElementById('closeReferencesModal'),
    });

    // -------------------------------------------------------
    // REFERENCES SLIDESHOW
    // -------------------------------------------------------
    const slides = [...document.querySelectorAll('.ref-slide')];
    const prevBtn = document.getElementById('refPrev');
    const nextBtn = document.getElementById('refNext');
    const counter = document.getElementById('refCounter');
    let current = 0;

    function goTo(index) {
      slides[current].classList.remove('active');
      current = index;
      slides[current].classList.add('active');
      counter.textContent = `${current + 1} / ${slides.length}`;
      prevBtn.disabled = current === 0;
      nextBtn.disabled = current === slides.length - 1;
    }

    prevBtn.addEventListener('click', () => { if (current > 0) goTo(current - 1); });
    nextBtn.addEventListener('click', () => { if (current < slides.length - 1) goTo(current + 1); });

    let touchStartX = null;
    const referencesModal = document.getElementById('referencesModal');
    referencesModal.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
    }, { passive: true });
    referencesModal.addEventListener('touchend', (e) => {
      if (touchStartX === null) return;
      const diff = touchStartX - e.changedTouches[0].clientX;
      if (Math.abs(diff) > 40) {
        if (diff > 0 && current < slides.length - 1) goTo(current + 1);
        if (diff < 0 && current > 0) goTo(current - 1);
      }
      touchStartX = null;
    });

    goTo(0);
  </script>
</body>
</html>